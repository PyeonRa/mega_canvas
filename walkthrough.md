# Mega Canvas - í”„ë¡œì íŠ¸ Walkthrough

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

**Mega Canvas**ëŠ” ì‹¤ì‹œê°„ í˜‘ì—… ë“œë¡œì‰ ìº”ë²„ìŠ¤ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— í•˜ë‚˜ì˜ ê±°ëŒ€í•œ ìº”ë²„ìŠ¤ì— ê·¸ë¦¼ì„ ê·¸ë¦¬ê³ , ì±„íŒ…í•˜ë©°, ë‹¤ì–‘í•œ ì´í™íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ê¸°ìˆ  ìŠ¤íƒ
| ì˜ì—­ | ê¸°ìˆ  |
|------|------|
| **Frontend** | Svelte 5 + Vite 7 |
| **Backend** | Express.js + Socket.IO |
| **ì‹¤ì‹œê°„ í†µì‹ ** | WebSocket (Socket.IO) |
| **ìŠ¤íƒ€ì¼ë§** | Vanilla CSS (Glassmorphism ë””ìì¸) |

---

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
somethin2/
â”œâ”€â”€ server.js              # ë°±ì—”ë“œ ì„œë²„ (Socket.IO)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.svelte         # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ main.js            # ì•± ì§„ì…ì 
â”‚   â”œâ”€â”€ app.css            # ì „ì—­ ìŠ¤íƒ€ì¼
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ Canvas.svelte  # í•µì‹¬ ìº”ë²„ìŠ¤ ì»´í¬ë„ŒíŠ¸ (1000+ lines)
â”‚       â”œâ”€â”€ Chat.svelte    # ì‹¤ì‹œê°„ ì±„íŒ… ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ Header.svelte  # ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜
â”‚       â”œâ”€â”€ Toolbar.svelte # ë“œë¡œì‰ ë„êµ¬ íŒ¨ë„
â”‚       â”œâ”€â”€ Sidebar.svelte # ì˜¨ë¼ì¸ ìœ ì € ì‚¬ì´ë“œë°”
â”‚       â”œâ”€â”€ Modals.svelte  # ëª¨ë‹¬ ë‹¤ì´ì–¼ë¡œê·¸ ëª¨ìŒ
â”‚       â””â”€â”€ state.svelte.js # ì „ì—­ ìƒíƒœ ê´€ë¦¬
â”œâ”€â”€ index.html             # HTML í…œí”Œë¦¿
â”œâ”€â”€ package.json           # í”„ë¡œì íŠ¸ ì˜ì¡´ì„±
â”œâ”€â”€ vite.config.js         # Vite ì„¤ì •
â””â”€â”€ svelte.config.js       # Svelte ì„¤ì •
```

---

## ğŸ”‘ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ìƒì„¸

### 1. `App.svelte` - ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸ë¡œ, ì „ì²´ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°í•©í•©ë‹ˆë‹¤.

**ì£¼ìš” ìƒíƒœ:**
- `color` - í˜„ì¬ ë¸ŒëŸ¬ì‹œ ìƒ‰ìƒ
- `brushSize` - ë¸ŒëŸ¬ì‹œ í¬ê¸°
- `mode` - í˜„ì¬ ë„êµ¬ ëª¨ë“œ (draw, pan, stamp, sparkle, nuke ë“±)
- `username` - ì‚¬ìš©ì ë‹‰ë„¤ì„
- `isVIP` - VIP ìƒíƒœ (í”„ë¦¬ë¯¸ì—„ ê¸°ëŠ¥ í™œì„±í™”)
- `isDarkMode` - ë‹¤í¬ëª¨ë“œ í† ê¸€
- `onlineUsers` - ì˜¨ë¼ì¸ ì‚¬ìš©ì ëª©ë¡

**ìƒ‰ìƒ íŒ”ë ˆíŠ¸:**
ì´ 18ê°€ì§€ ë¯¸ë¦¬ ì •ì˜ëœ ìƒ‰ìƒ ì œê³µ

---

### 2. `Canvas.svelte` - í•µì‹¬ ìº”ë²„ìŠ¤ ì—”ì§„
ê°€ì¥ ë³µì¡í•œ ì»´í¬ë„ŒíŠ¸ë¡œ, ì‹¤ì‹œê°„ ë“œë¡œì‰ ê¸°ëŠ¥ì˜ í•µì‹¬ì…ë‹ˆë‹¤.

**ì£¼ìš” ê¸°ëŠ¥:**
| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **Draw** | ê¸°ë³¸ ë¸ŒëŸ¬ì‹œ ë“œë¡œì‰ |
| **Pan** | ìº”ë²„ìŠ¤ ì´ë™ (ì¤‘í´ë¦­/ìš°í´ë¦­) |
| **Stamp** | ì´ëª¨ì§€ ìŠ¤íƒ¬í”„ ì°ê¸° ğŸ”¥ğŸ’âœ¨ğŸŒˆ |
| **Sparkle** | ë§ˆë²• ìŠ¤íŒŒí´ëŸ¬ íš¨ê³¼ |
| **Nuke** | ì›í˜• ë²”ìœ„ ì‚­ì œ (VIP ì „ìš©) |

**ì´ë²¤íŠ¸ ì²˜ë¦¬:**
- `handlePointerDown` - ë§ˆìš°ìŠ¤/í„°ì¹˜ ì‹œì‘
- `handlePointerMove` - ë“œë˜ê·¸/ë“œë¡œì‰
- `handlePointerUp` - ë“œë¡œì‰ ì¢…ë£Œ
- `handleWheel` - ì¤Œ ì¸/ì•„ì›ƒ

**ì‹œê° íš¨ê³¼:**
- `spawnConfetti()` - í­ì£½ íš¨ê³¼
- `spawnRipple()` - ë¬¼ê²° íš¨ê³¼
- `triggerNuke()` - í­ë°œ íš¨ê³¼
- `spawnScreenShake()` - í™”ë©´ í”ë“¤ë¦¼

**Socket.IO ì´ë²¤íŠ¸:**
```javascript
socket.emit("stroke_start", data)  // ë“œë¡œì‰ ì‹œì‘
socket.emit("stroke_update", data) // ë“œë¡œì‰ ì—…ë°ì´íŠ¸
socket.emit("new_stamp", data)     // ìŠ¤íƒ¬í”„ ì¶”ê°€
socket.emit("cursor", data)        // ì»¤ì„œ ìœ„ì¹˜ ê³µìœ 
socket.emit("nuke", data)          // Nuke ì´ë²¤íŠ¸
```

---

### 3. `Chat.svelte` - ì‹¤ì‹œê°„ ì±„íŒ…
Socket.IOë¥¼ í†µí•œ ì‹¤ì‹œê°„ ë©€í‹°í”Œë ˆì´ì–´ ì±„íŒ… ê¸°ëŠ¥ì…ë‹ˆë‹¤.

**ì£¼ìš” ê¸°ëŠ¥:**
- ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì†¡ìˆ˜ì‹ 
- ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ë°°ì§€ í‘œì‹œ
- ìë™ ìŠ¤í¬ë¡¤
- VIP ì‚¬ìš©ì í‘œì‹œ (âœ¨)
- ì‹œìŠ¤í…œ ë©”ì‹œì§€ ì§€ì›

**Socket ì´ë²¤íŠ¸:**
```javascript
socket.on("chat_message", handleMsg)  // ë©”ì‹œì§€ ìˆ˜ì‹ 
socket.on("init", handleInit)         // ì´ˆê¸° ì±„íŒ… íˆìŠ¤í† ë¦¬ ë¡œë“œ
socket.emit("chat_message", {...})    // ë©”ì‹œì§€ ì „ì†¡
```

---

### 4. `Toolbar.svelte` - ë„êµ¬ íŒ¨ë„
í™”ë©´ í•˜ë‹¨ì˜ ë„í‚¹ ìŠ¤íƒ€ì¼ íˆ´ë°”ì…ë‹ˆë‹¤.

**ë„êµ¬ ê·¸ë£¹:**
1. **ëª¨ë“œ ì„ íƒ** - Draw, Pan, Stamp, Sparkle
2. **ìƒ‰ìƒ ì„ íƒ** - ì»¬ëŸ¬ í”¼ì»¤ + íŒ”ë ˆíŠ¸
3. **ë¸ŒëŸ¬ì‹œ í¬ê¸°** - 1-50px ìŠ¬ë¼ì´ë”
4. **VIP ë„êµ¬** - Rainbow ëª¨ë“œ, Ghost ëª¨ë“œ, Nuke
5. **ì•¡ì…˜** - ì´ë¯¸ì§€ ì—…ë¡œë“œ, ìº”ë²„ìŠ¤ í´ë¦¬ì–´

---

### 5. `Header.svelte` - ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜
ë¸Œëœë“œ ë¡œê³ , í†µê³„, ì‚¬ìš©ì ì•¡ì…˜ì„ í‘œì‹œí•©ë‹ˆë‹¤.

**í‘œì‹œ ì •ë³´:**
- ë§ˆìš°ìŠ¤ ì¢Œí‘œ (X, Y)
- ê¸°ì—¬ í”½ì…€ ìˆ˜
- ì˜¨ë¼ì¸ ì‚¬ìš©ì ìˆ˜
- VIP ì—…ê·¸ë ˆì´ë“œ ë²„íŠ¼
- ë‹¤í¬ëª¨ë“œ í† ê¸€

---

### 6. `Modals.svelte` - ëª¨ë‹¬ ë‹¤ì´ì–¼ë¡œê·¸
3ê°€ì§€ ì£¼ìš” ëª¨ë‹¬ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

| ëª¨ë‹¬ | ìš©ë„ |
|------|------|
| **Nickname Modal** | ì´ˆê¸° ë‹‰ë„¤ì„ ì„¤ì • |
| **Ad/Media Modal** | ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ìº”ë²„ìŠ¤ ë™ê¸°í™” |
| **Shop Modal** | VIP ì—…ê·¸ë ˆì´ë“œ (Prestige Marketplace) |

---

### 7. `Sidebar.svelte` - ì˜¨ë¼ì¸ ìœ ì € íŒ¨ë„
í˜„ì¬ ì ‘ì† ì¤‘ì¸ ì‚¬ìš©ì ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.

**í‘œì‹œ ì •ë³´:**
- ì‚¬ìš©ì ì´ë¦„
- ì‚¬ìš©ì ìƒ‰ìƒ
- VIP ìƒíƒœ
- ê¸°ì—¬ í”½ì…€ ìˆ˜

---

### 8. `state.svelte.js` - ì „ì—­ ìƒíƒœ
Socket.IO ì—°ê²°ì„ ì „ì—­ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ì‹±ê¸€í†¤ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

```javascript
class GlobalState {
    socket = $state(null);
    onlineUsers = $state([]);
    
    connect() {
        this.socket = io({
            reconnection: true,
            reconnectionAttempts: 10,
            timeout: 10000,
            autoConnect: true
        });
    }
}
```

---

## ğŸ–¥ï¸ ë°±ì—”ë“œ ì„œë²„ (`server.js`)

Express + Socket.IO ê¸°ë°˜ì˜ ì‹¤ì‹œê°„ ì„œë²„ì…ë‹ˆë‹¤.

**ë©”ëª¨ë¦¬ ì €ì¥ì†Œ:**
```javascript
let strokes = [];      // ëª¨ë“  ë“œë¡œì‰ ìŠ¤íŠ¸ë¡œí¬
let ads = [];          // ì—…ë¡œë“œëœ ì´ë¯¸ì§€
let stamps = [];       // ì´ëª¨ì§€ ìŠ¤íƒ¬í”„
let chatHistory = [];  // ì±„íŒ… íˆìŠ¤í† ë¦¬ (ìµœëŒ€ 50ê°œ)
```

**Socket ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬:**
| ì´ë²¤íŠ¸ | ì„¤ëª… |
|--------|------|
| `connection` | ì‚¬ìš©ì ì—°ê²° & ì´ˆê¸° ìƒíƒœ ì „ì†¡ |
| `stroke_start` | ìƒˆ ìŠ¤íŠ¸ë¡œí¬ ì‹œì‘ |
| `stroke_update` | ìŠ¤íŠ¸ë¡œí¬ í¬ì¸íŠ¸ ì¶”ê°€ |
| `new_ad` | ì´ë¯¸ì§€ ë¸Œë¡œë“œìºìŠ¤íŠ¸ |
| `new_stamp` | ìŠ¤íƒ¬í”„ ë¸Œë¡œë“œìºìŠ¤íŠ¸ |
| `cursor` | ì»¤ì„œ ìœ„ì¹˜ ê³µìœ  |
| `confetti/ripple/sparkler` | ì´í™íŠ¸ ë¸Œë¡œë“œìºìŠ¤íŠ¸ |
| `nuke` | ë²”ìœ„ ì‚­ì œ ì²˜ë¦¬ |
| `chat_message` | ì±„íŒ… ë©”ì‹œì§€ ì²˜ë¦¬ |
| `clear` | ìº”ë²„ìŠ¤ ì™„ì „ ì´ˆê¸°í™” |
| `disconnect` | ì‚¬ìš©ì ì—°ê²° í•´ì œ |

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
npm install
```

### 2. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰
```bash
npm run backend
# ë˜ëŠ”
node server.js
```
ì„œë²„ê°€ `http://localhost:3001`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### 3. í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
npm run dev
```
ê°œë°œ ì„œë²„ê°€ Viteë¥¼ í†µí•´ ì‹¤í–‰ë©ë‹ˆë‹¤ (ê¸°ë³¸: `http://localhost:5173`).

### 4. í”„ë¡œë•ì…˜ ë¹Œë“œ
```bash
npm run build
npm run preview
```

---

## ğŸ’¡ ì£¼ìš” ê¸°ëŠ¥ ìš”ì•½

### ê¸°ë³¸ ê¸°ëŠ¥
- âœï¸ **ì‹¤ì‹œê°„ ë“œë¡œì‰** - ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ê·¸ë¦¼ ê·¸ë¦¬ê¸°
- ğŸ–¼ï¸ **ì´ë¯¸ì§€ ì—…ë¡œë“œ** - ìº”ë²„ìŠ¤ì— ì´ë¯¸ì§€ ì‚½ì…
- ğŸ¨ **ì´ëª¨ì§€ ìŠ¤íƒ¬í”„** - ëœë¤ ì´ëª¨ì§€ ìŠ¤íƒ¬í”„ ì°ê¸°
- ğŸ’¬ **ì‹¤ì‹œê°„ ì±„íŒ…** - ë‹¤ë¥¸ ì•„í‹°ìŠ¤íŠ¸ë“¤ê³¼ ì†Œí†µ
- ğŸ‘¥ **ì˜¨ë¼ì¸ ìœ ì € í™•ì¸** - ì ‘ì† ì¤‘ì¸ ì‚¬ìš©ì ëª©ë¡

### VIP ì „ìš© ê¸°ëŠ¥
- ğŸŒˆ **Rainbow Mode** - ë¬´ì§€ê°œ ìƒ‰ìƒìœ¼ë¡œ ìë™ ë³€ê²½
- ğŸ‘» **Ghost Mode** - íˆ¬ëª… ë“œë¡œì‰
- â˜¢ï¸ **Nuke** - ì›í˜• ë²”ìœ„ ì‚­ì œ (ì¿¨ë‹¤ìš´ ìˆìŒ)

### UI/UX ê¸°ëŠ¥
- ğŸŒ™ **ë‹¤í¬ëª¨ë“œ** ì§€ì›
- ğŸ“± **ë°˜ì‘í˜• ë””ìì¸** - ëª¨ë°”ì¼ ìµœì í™”
- ğŸ” **ì¤Œ ì¸/ì•„ì›ƒ** - ë§ˆìš°ìŠ¤ íœ  ë˜ëŠ” ë²„íŠ¼
- ğŸ† **ì‹œê° íš¨ê³¼** - Confetti, Ripple, Screen Shake

---

## ğŸ“ ë¡œì»¬ ì €ì¥ì†Œ í‚¤

| í‚¤ | ìš©ë„ |
|----|------|
| `canvas_user_v7` | ì €ì¥ëœ ì‚¬ìš©ì ë‹‰ë„¤ì„ |
| `canvas_is_vip_v1` | VIP ìƒíƒœ |
| `theme_v7` | í…Œë§ˆ ì„¤ì • (light/dark) |
| `canvas_strokes_v8` | ë¡œì»¬ ìŠ¤íŠ¸ë¡œí¬ ë°±ì—… |
| `canvas_ads_v8` | ë¡œì»¬ ì´ë¯¸ì§€ ë°±ì—… |
| `canvas_stamps_v8` | ë¡œì»¬ ìŠ¤íƒ¬í”„ ë°±ì—… |

---

## ğŸ”§ ì„¤ì • íŒŒì¼

### `vite.config.js`
```javascript
import { defineConfig } from 'vite'
import { svelte } from '@sveltejs/vite-plugin-svelte'

export default defineConfig({
  plugins: [svelte()],
})
```

### `svelte.config.js`
```javascript
import { vitePreprocess } from '@sveltejs/vite-plugin-svelte'

export default {
  preprocess: vitePreprocess()
}
```

---

## ğŸ¨ ë””ìì¸ ì‹œìŠ¤í…œ

### CSS ë³€ìˆ˜ (Light Mode)
```css
--bg-app: #f1f5f9;
--text-main: #1e293b;
--text-muted: #64748b;
--glass-bg: rgba(255, 255, 255, 0.8);
--glass-border: rgba(0, 0, 0, 0.05);
--glass-shadow: rgba(0, 0, 0, 0.08);
--accent: #2563eb;
```

### CSS ë³€ìˆ˜ (Dark Mode)
```css
--bg-app: #0f172a;
--text-main: #f8fafc;
--text-muted: #94a3b8;
--glass-bg: rgba(15, 23, 42, 0.8);
--glass-border: rgba(255, 255, 255, 0.1);
--glass-shadow: rgba(0, 0, 0, 0.4);
```

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025ë…„ 12ì›” 29ì¼*
